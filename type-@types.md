npm은 세가지 종류의 의존성을 구분해서 관리하며, 각각의 의존성은 package.json 일 내의 별도 영역에 들어있습니다.

- dependencies
    
    현재 프로젝트를 하는데 필수적인 라이브러리들이 포함됩니다.프로젝트 런타임에 lodash가 사용된다면 dependencies에 포함되어야합니다. 프로젝트를 npm에 공개하여 다른 사용자가 해당 프로젝트를 설치한다면, dependencies에 들어 있는 라이브러리도 함께 설치될것입니다. 이러한 현상을 전이 의존성이라고 합니다.
    
- devDependencies
    
    현재 프로젝트를 개발하고 테스트하는데 사용되지만, 런타임에는 필요 없는 라이브러리들이 포함됩니다. 프로젝트를 npm에 공개하여 다른 사용자가 설치하면 이 dev Dependencies가 제외됩니다.
    
- peerDependencies
    
    런타임에 필요하긴 하지만, 의존성을 직접 관리하지 않는 라이브러리들이 포함됩니다. 제이쿼리 플러그인들은 다양한 버전의 제이쿼리와 호환되므로 제이쿼리 버전을 플러그인에서 선택하지 ㅇ낳고, 플러그인이 사용되는 실제 플로젝트에서 선택하도록 만들때 사용합니다.
    

타입스크립트와 관련된 프로젝트는 대부분 devDependencies에 속합니다. 의존성에 고려해야할 두가지입니다.

- 첫번째는 타입스크립트 자체 의존성을 고려해야합니다.  타입스크립트는 시스템 레벨로 설치할수 있지만, 다음 두가지 이유로 추천하지 않습니다.
    
    1) 팀원들 모두가 항상 동일한 버전을 설치한다는 보장이 없습니다.
    
    2) 프로젝트를 셋업할 때 별도의 단계가 추가됩니다.
    

따라서 타입스크립트를 시스템 레벨보다 devDependencies에 넣는 것이 좋습니다.

- 두번쨰는 타입 의존성(@types)를 고려해야합니다. 사용하려는 라이브러리에 타입 선언이 포함되어 있지 않더라도, DefinetlyTyped에서 타입 정보를 얻을수 있습니다. DefinetlyTyped의 타입 정의들은 npm 레지스트리의 @types 스코프에 공개됩니다. 여기에는 타입 정보만 ㅍ함하고 있고, 구현채는 포함하지 않습니다.

### 요약

- 타입스크립트를 시스템 레벨로 설치하지 마세요. devDependencies에 포함하세요.
- @types 의존성도 devDependencies에 넣으세요.

### 타입선언과 관련된 세가지 버전 이해하기

의존성 관리는 매우 어렵습니다. 그래서 여러분은 대부분 라이브러리를 추가할 뿐이지, 라이브러리의 전의적 의존성이 호환되는 지 깊게 생각하지 않았을 겁니다.

그런데 타입스크립트는 의존성관리를 해결해주기는 커녕 더 어렵게 만들곤 합니다. 왜냐하면 타입스크립트를 사용하면 이 세가지를 고려해야합니다.

- 라이브러리 버전
- 타입 선언(@types)의 버전
- 타입스크립트의 버전

이 세가지 버전 중 하나라도 안맞으면 의존성과 상관없어 보이는 곳에서 엉뚱한 에러가 날수 있습니다.

타입스크립트에서 일반적으로 의존성을 사용하는 방식은 다음과 같습니다.

특정 라이브러리를 dependencies로 설치하고, 타입 정보는 devDependencies로 설치합니다.

```jsx
npm install react
// react@16.8.6
npm install --save-dev @types/react
// @types/react@16.8.19
```

메이저 버전과 마이너 버전이 일치하나, 패치버전은 아닙니다. @types/react@16.8.19는 리액트 버전 16.8 버전의 API를 의미합니다. 만약 리액트 모듈이 시맨틱 버전 규칙을 제대로 지킨다고 가정하면 패치 버전은 공개 API 사양을 변경하지 않스빈ㄷ. 그러나 타입 선언에도 버그가 있을수 있으므로, 라이브러리 자체보다 더 많은 업데이트가 있습니다.

그러나 실제 라이브러리와 타입 정보의 버전이 별도로 관리되는 방식은 다음 네가지 문제점이 있습니다.

1. 첫째, 라이브러리를 업데이트 했지만 실수로 타입 선언은 업데이트 하지 않은 경우입니다.
2. 두번째, 라이브러리보다 타입 선언이 더 최신이 경우입니다.
3. 세번째 프로젝트에서 사용하는 타입스크립트 버전보다 라이브러리에서 필요로 하는 타입스크립트의버전이 최신인 경우입니다.
4. @types의 의존성이 중복될수 있습니다.

* 참고
이펙티브 타입스크립트 책